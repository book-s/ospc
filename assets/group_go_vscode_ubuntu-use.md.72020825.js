import{_ as s,c as a,o as n,a as l}from"./app.a7d8838a.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"Ubuntu基础用法","slug":"ubuntu基础用法","link":"#ubuntu基础用法","children":[]},{"level":2,"title":"修改root密码","slug":"修改root密码","link":"#修改root密码","children":[{"level":3,"title":"root密码设置","slug":"root密码设置","link":"#root密码设置","children":[]},{"level":3,"title":"ubuntu主机名修改","slug":"ubuntu主机名修改","link":"#ubuntu主机名修改","children":[]},{"level":3,"title":"ssh连接远程服务器","slug":"ssh连接远程服务器","link":"#ssh连接远程服务器","children":[]},{"level":3,"title":"tree根据文件层级列出目录","slug":"tree根据文件层级列出目录","link":"#tree根据文件层级列出目录","children":[]},{"level":3,"title":"端口查看命令","slug":"端口查看命令","link":"#端口查看命令","children":[]}]},{"level":2,"title":"Ubuntu创建用户和目录","slug":"ubuntu创建用户和目录","link":"#ubuntu创建用户和目录","children":[{"level":3,"title":"创建新用户","slug":"创建新用户","link":"#创建新用户","children":[]},{"level":3,"title":"新用户设置密码","slug":"新用户设置密码","link":"#新用户设置密码","children":[]},{"level":3,"title":"用户加入指定工作组","slug":"用户加入指定工作组","link":"#用户加入指定工作组","children":[]},{"level":3,"title":"查看新的用户","slug":"查看新的用户","link":"#查看新的用户","children":[]},{"level":3,"title":"新用户增加sudo权限","slug":"新用户增加sudo权限","link":"#新用户增加sudo权限","children":[]},{"level":3,"title":"修改/etc/sudoers权限","slug":"修改-etc-sudoers权限","link":"#修改-etc-sudoers权限","children":[]},{"level":3,"title":"编辑/etc/sudoers","slug":"编辑-etc-sudoers","link":"#编辑-etc-sudoers","children":[]},{"level":3,"title":"恢复原来/etc/sudoers权限","slug":"恢复原来-etc-sudoers权限","link":"#恢复原来-etc-sudoers权限","children":[]},{"level":3,"title":"新用户远程登录无法显示路径","slug":"新用户远程登录无法显示路径","link":"#新用户远程登录无法显示路径","children":[]}]},{"level":2,"title":"删除用户","slug":"删除用户","link":"#删除用户","children":[]},{"level":2,"title":"组","slug":"组","link":"#组","children":[{"level":3,"title":"组查看","slug":"组查看","link":"#组查看","children":[]},{"level":3,"title":"查看用户所在组","slug":"查看用户所在组","link":"#查看用户所在组","children":[]},{"level":3,"title":"查看ID在所属组","slug":"查看id在所属组","link":"#查看id在所属组","children":[]},{"level":3,"title":"直接查看组文件 more /etc/group","slug":"直接查看组文件-more-etc-group","link":"#直接查看组文件-more-etc-group","children":[]}]},{"level":2,"title":"删除组","slug":"删除组","link":"#删除组","children":[]},{"level":2,"title":"Samba安装","slug":"samba安装","link":"#samba安装","children":[{"level":3,"title":"配置创建共享目录","slug":"配置创建共享目录","link":"#配置创建共享目录","children":[]},{"level":3,"title":"添加Samba用户","slug":"添加samba用户","link":"#添加samba用户","children":[]},{"level":3,"title":"Samba配置","slug":"samba配置","link":"#samba配置","children":[]}]},{"level":2,"title":"ufw防火墙状态","slug":"ufw防火墙状态","link":"#ufw防火墙状态","children":[]},{"level":2,"title":"静态IP设置","slug":"静态ip设置","link":"#静态ip设置","children":[]}],"relativePath":"group/go/vscode/ubuntu-use.md"}'),e={name:"group/go/vscode/ubuntu-use.md"},p=l(`<h2 id="ubuntu基础用法" tabindex="-1">Ubuntu基础用法 <a class="header-anchor" href="#ubuntu基础用法" aria-hidden="true">#</a></h2><h2 id="修改root密码" tabindex="-1">修改root密码 <a class="header-anchor" href="#修改root密码" aria-hidden="true">#</a></h2><h3 id="root密码设置" tabindex="-1">root密码设置 <a class="header-anchor" href="#root密码设置" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passwd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#FFCB6B;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password:输入新密码</span></span>
<span class="line"><span style="color:#FFCB6B;">Retype</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password:再次输入新密码</span></span>
<span class="line"><span style="color:#FFCB6B;">Passwd:password</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">updated</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successfully</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">密码更新成功</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="ubuntu主机名修改" tabindex="-1">ubuntu主机名修改 <a class="header-anchor" href="#ubuntu主机名修改" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">hostname</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看主机名称</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/hostname</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ssh连接远程服务器" tabindex="-1">ssh连接远程服务器 <a class="header-anchor" href="#ssh连接远程服务器" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">ssh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user@ip+回车输入密码登录</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="tree根据文件层级列出目录" tabindex="-1">tree根据文件层级列出目录 <a class="header-anchor" href="#tree根据文件层级列出目录" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">tree</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="端口查看命令" tabindex="-1">端口查看命令 <a class="header-anchor" href="#端口查看命令" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">netstat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ntlp</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">kill</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PID进程号</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="ubuntu创建用户和目录" tabindex="-1">Ubuntu创建用户和目录 <a class="header-anchor" href="#ubuntu创建用户和目录" aria-hidden="true">#</a></h2><h3 id="创建新用户" tabindex="-1">创建新用户 <a class="header-anchor" href="#创建新用户" aria-hidden="true">#</a></h3><ul><li><p><code>adduser</code></p></li><li><p><code>useradd</code>需要使用参数选项指定上述基本设置，如果不使用任何参数，则创建的用户无密码、无主目录、没有指定shell版本。</p></li><li><p><code>deluser</code></p></li><li><p><code>userdel</code></p></li></ul><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 注意要在后面加-m，否则不会在home路径下创建该用户的文件夹</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-G</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">groupname</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 创建用户并添加到指定组</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/passwd</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 执行如下命令查看passwd文件中是否有刚才添加的用户名，如果有，则表示添加成功</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="新用户设置密码" tabindex="-1">新用户设置密码 <a class="header-anchor" href="#新用户设置密码" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 执行如下命令弹出提示窗口中设置密码即可</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passwd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="用户加入指定工作组" tabindex="-1">用户加入指定工作组 <a class="header-anchor" href="#用户加入指定工作组" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gpasswd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">groupname</span><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># 将用户加入工作组</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gpasswd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-M</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username,username2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">groupname</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 将用户批量加入工作组</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="查看新的用户" tabindex="-1">查看新的用户 <a class="header-anchor" href="#查看新的用户" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/passwd</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-n</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/passwd</span><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;"># 查看用户详细信息，参数-n显示行号</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-n</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/group</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;font-style:italic;"># 查看组详细信息</span></span>
<span class="line"><span style="color:#FFCB6B;">who</span><span style="color:#A6ACCD;">                               </span><span style="color:#676E95;font-style:italic;"># 查看当前所有登录的用户列表</span></span>
<span class="line"><span style="color:#FFCB6B;">whoami</span><span style="color:#A6ACCD;">                            </span><span style="color:#676E95;font-style:italic;"># 查看当前登录用户的账号</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="新用户增加sudo权限" tabindex="-1">新用户增加sudo权限 <a class="header-anchor" href="#新用户增加sudo权限" aria-hidden="true">#</a></h3><p>在使用Linux系统过程中，通常情况下，我们都会使用普通用户进行日常操作，而root用户只有在权限分配及系统设置时才会使用，而root用户的密码也不可能公开。普通用户执行到系统程序时，需要临时提升权限，sudo就是我们常用的命令，仅需要输入当前用户密码，便可以完成权限的临时提升。在使用sudo命令的过程中，我们经常会遇到当前用户不在sudoers文件中的提示信息，解决方法如下</p><h3 id="修改-etc-sudoers权限" tabindex="-1">修改/etc/sudoers权限 <a class="header-anchor" href="#修改-etc-sudoers权限" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 执行如下命令 增加写权限</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">u+w</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/sudoers</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="编辑-etc-sudoers" tabindex="-1">编辑/etc/sudoers <a class="header-anchor" href="#编辑-etc-sudoers" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/sudoers</span></span>
<span class="line"><span style="color:#FFCB6B;">username</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ALL=</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">ALL:ALL</span><span style="color:#A6ACCD;">) ALL</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在root用户下面增加，username为新的用户，根据需要自sing修改</p><h3 id="恢复原来-etc-sudoers权限" tabindex="-1">恢复原来/etc/sudoers权限 <a class="header-anchor" href="#恢复原来-etc-sudoers权限" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">u-w</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/sudoers</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="新用户远程登录无法显示路径" tabindex="-1">新用户远程登录无法显示路径 <a class="header-anchor" href="#新用户远程登录无法显示路径" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/passwd</span></span>
<span class="line"><span style="color:#FFCB6B;">username:x:1002:1002:</span><span style="color:#82AAFF;">:</span><span style="color:#FFCB6B;">/home/gitbook:/bin/sh</span></span>
<span class="line"><span style="color:#FFCB6B;">改为</span></span>
<span class="line"><span style="color:#FFCB6B;">gitbook:x:1002:1002:</span><span style="color:#82AAFF;">:</span><span style="color:#FFCB6B;">/home/gitbook:/bin/bash</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="删除用户" tabindex="-1">删除用户 <a class="header-anchor" href="#删除用户" aria-hidden="true">#</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 加上-r可以删除/home/路径下的用户文件夹，否则不能</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">userdel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="组" tabindex="-1">组 <a class="header-anchor" href="#组" aria-hidden="true">#</a></h2><ul><li><code>groupadd</code>创建用户组</li></ul><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">groupadd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">888</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">share</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 其GID为888</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="组查看" tabindex="-1">组查看 <a class="header-anchor" href="#组查看" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">groups</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 查看当前用户组</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>查看groups当前用户所在组</p><h3 id="查看用户所在组" tabindex="-1">查看用户所在组 <a class="header-anchor" href="#查看用户所在组" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">groups</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="查看id在所属组" tabindex="-1">查看ID在所属组 <a class="header-anchor" href="#查看id在所属组" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="直接查看组文件-more-etc-group" tabindex="-1">直接查看组文件 more /etc/group <a class="header-anchor" href="#直接查看组文件-more-etc-group" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">more</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/group</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="删除组" tabindex="-1">删除组 <a class="header-anchor" href="#删除组" aria-hidden="true">#</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">groupdel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">users</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="samba安装" tabindex="-1">Samba安装 <a class="header-anchor" href="#samba安装" aria-hidden="true">#</a></h2><p>使用以下命令安装samba程序</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;font-style:italic;"># 更新程序列表</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;"># 安装samba程序</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>通过运行<code>whereis samba</code>命令、检查samba安装是否成功，显示一下内容表示安装成功</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">samba:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/sbin/samba</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/lib/x86_64-linux-gnu/samba</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/samba</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/share/samba</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/share/man/man8/samba.8.gz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/share/man/man7/samba.7.gz</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="配置创建共享目录" tabindex="-1">配置创建共享目录 <a class="header-anchor" href="#配置创建共享目录" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 新建目录，用于共享</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">userfil</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">/Share</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 更改权限信息</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chown</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nobody:nogroup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">userfil</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">/share</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 给所有用户添加读写权限</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">777</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">userfil</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">/Share</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="添加samba用户" tabindex="-1">添加Samba用户 <a class="header-anchor" href="#添加samba用户" aria-hidden="true">#</a></h3><ul><li>添加 Samba 用户，用于在访问共享目录时使用。这里添加的用户在 Linux 中必须存在。</li></ul><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">smbpasswd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># samba添加用户 修改密码</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="samba配置" tabindex="-1">Samba配置 <a class="header-anchor" href="#samba配置" aria-hidden="true">#</a></h3><p>使用以下命令编辑samba配置文件</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/samba/smb.conf</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>smb.conf文件最后面追加如下配置信息</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">share</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">comment</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SHARE</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">path</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">userfil</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">/share</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">browseable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yes</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">writable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yes</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">available</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yes</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">valid</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">users</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sshare,@sshare</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;"># 插入组用@sshare让跟多用户可以访问</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>smb.conf文件配置多用户访问</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">smbresource</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">                         </span><span style="color:#676E95;font-style:italic;"># 资源名 这里叫什么 连接samba后显示的目录就叫什么</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">comment</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">smbuser</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Media</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">File</span><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># 注释</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">path</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/yourpath</span><span style="color:#A6ACCD;">                    </span><span style="color:#676E95;font-style:italic;"># 需要samba共享的目录</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">valid</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">smbuser,smbuseradmin</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 可以使用该资源的用户，多个用户用‘,’分隔</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">guest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ok</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;font-style:italic;"># 是否运行guest用户</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">read</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">only</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yes</span><span style="color:#A6ACCD;">                     </span><span style="color:#676E95;font-style:italic;"># 是否只读</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">write</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">list</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">smbuseradmin</span><span style="color:#A6ACCD;">           </span><span style="color:#676E95;font-style:italic;"># 有可写权限的用户列表，多个用户用‘,’分隔</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">browsable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yes</span><span style="color:#A6ACCD;">                     </span><span style="color:#676E95;font-style:italic;"># 是否能被浏览到，如果选了否 只能通过 ‘\\\\&lt;ip&gt;/资源名’访问，实测这样在有些环境会出问题，一般建议开启</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mask</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0755</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">directory</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mask</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#F78C6C;">0755</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>运行命令<code>systemctl restart</code>重新启动Samba服务</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">smbd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>更新防火墙规则以允许Samba流量</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ufw</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">allow</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">samba</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="ufw防火墙状态" tabindex="-1">ufw防火墙状态 <a class="header-anchor" href="#ufw防火墙状态" aria-hidden="true">#</a></h2><ul><li><code>sudo ufw status</code> 查看防火墙当前状态</li><li><code>sudo ufw enable</code> 开启防火墙</li><li><code>sudo ufw disable</code> 关闭防火墙</li><li><code>sudo ufw version</code> 查看防火墙版本</li><li><code>sudo ufw default allow</code> 默认允许外部访问本机</li><li><code>sudo ufw default deny</code> 默认拒绝外部访问主机</li><li><code>sudo ufw allow 443</code> 允许外部访问443端口</li><li><code>sudo ufw deny 443</code> 拒绝外部访问443端口</li><li><code>sudo ufw allow from 192.168.0.1</code> 允许某个IP地址访问本机所有端口</li></ul><h2 id="静态ip设置" tabindex="-1">静态IP设置 <a class="header-anchor" href="#静态ip设置" aria-hidden="true">#</a></h2><p>编辑<code>sudo vim /etc/netplan/50-cloud-init.yaml</code>文件</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 内容如下</span></span>
<span class="line"><span style="color:#FFCB6B;">network:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ethernets:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">ens32:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">addresses:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">192.168.120.8/</span><span style="color:#F78C6C;">24</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">dhcp4:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">gateway4:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">192.168.120.1</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#FFCB6B;">nameservers:</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">addresses:</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">8.8.8.8</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">search:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">version:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>重新加载配置</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">netplan</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apply</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>说明</strong></p><ul><li>ens33:网络接口名称</li><li>dhcp4:接收IPV4接口的dhcp属性</li><li>dhcp6:接收IPV6接口的dhcp属性</li><li>addresses:接口的静态地址序列</li><li>gateway4:默认网关的IPV4地址</li><li>Nameservers:DNS服务器地址</li></ul>`,79),o=[p];function r(c,t,i,C,d,y){return n(),a("div",null,o)}const b=s(e,[["render",r]]);export{h as __pageData,b as default};
